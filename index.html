<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Capobastone Fan - Mini Web App</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{ --glass: rgba(255,255,255,0.12); --glass-strong: rgba(255,255,255,0.2); --fg:#fff; --primary1:#8E2DE2; --primary2:#4A00E0; --accent1:#f093fb; --accent2:#f5576c; --shadow:0 8px 30px rgba(0,0,0,.35); --radius:16px; }
    *{box-sizing:border-box}
    body{ margin:0; font-family:Poppins,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; color:var(--fg);
      background: radial-gradient(1200px 800px at 15% 10%, #33215b 0%, transparent 60%), radial-gradient(900px 600px at 85% 20%, #1a3d7c 0%, transparent 60%), linear-gradient(135deg, var(--primary1) 0%, var(--primary2) 100%);
      min-height:100dvh; line-height:1.55; }
    header{ position:sticky; top:0; z-index:10; backdrop-filter: blur(14px) saturate(120%); background: linear-gradient(120deg, rgba(255,255,255,.12), rgba(255,255,255,.06)); border-bottom:1px solid rgba(255,255,255,.15); }
    .container{max-width:1100px; margin:0 auto; padding:24px 20px}
    .hero{ display:flex; align-items:center; gap:18px; padding:22px 0 8px; }
    .logo{width:44px; height:44px; border-radius:12px; display:grid; place-items:center; background: linear-gradient(135deg, var(--accent1), var(--accent2)); box-shadow: var(--shadow); animation: float 4s ease-in-out infinite; }
    .logo svg{filter: drop-shadow(0 4px 10px rgba(0,0,0,.35));}
    @keyframes float{ 0%,100%{ transform: translateY(0)} 50%{ transform: translateY(-4px)} }
    h1{font-size: clamp(22px, 2.8vw, 36px); margin:0}
    .subtitle{opacity:.9; font-weight:300; margin-top:4px}
    .grid{display:grid; gap:20px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); margin-top:22px}
    .card{ background: var(--glass); border: 1px solid rgba(255,255,255,.18); backdrop-filter: blur(16px) saturate(120%); border-radius: var(--radius); padding:20px; box-shadow: var(--shadow); transform: translateZ(0); }
    .card h2{margin:0 0 12px; font-size:20px; display:flex; align-items:center; gap:8px}
    .card h2 .pulse{width:10px; height:10px; border-radius:50%; background: #8b5cf6; position:relative}
    .card h2 .pulse::after{content:""; position:absolute; inset:-6px; border-radius:inherit; border:2px solid #c4b5fd; animation:pulse 1.8s infinite}
    @keyframes pulse{0%{opacity:.75; transform:scale(.6)} 70%{opacity:0; transform:scale(1.8)} 100%{opacity:0;}}
    label{font-size:12px; opacity:.85}
    input, select, button, textarea{font-family:inherit}
    input[type="number"], input[type="text"], table input{ width:100%; padding:10px 12px; margin-top:6px; color:#fff; border-radius:12px; border:1px solid rgba(255,255,255,.2); background: rgba(255,255,255,.06); outline:none; }
    .btn{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; margin-top:10px; border-radius:12px; border:1px solid rgba(255,255,255,.22); background: linear-gradient(135deg, var(--accent1), var(--accent2)); color:#fff; cursor:pointer; box-shadow: var(--shadow); transition: transform .15s ease, filter .2s ease; }
    .btn:hover{ transform: translateY(-2px); filter: saturate(115%) }
    table{ width:100%; border-collapse:separate; border-spacing:0; overflow:hidden; border-radius:14px;}
    thead th{ text-align:left; font-weight:600; font-size:13px; opacity:.95; padding:10px 12px; background: var(--glass-strong);}
    tbody td{ padding:10px 12px; border-top:1px solid rgba(255,255,255,.15); background: rgba(255,255,255,.06)}
    .muted{opacity:.85; font-size:12px}
    .footer{ text-align:center; padding:26px 10px; opacity:.7 }
    .row{ display:grid; grid-template-columns:1fr 1fr; gap:12px }
    .result{ margin-top:10px; font-weight:600; }
    .tag{ display:inline-block; padding:4px 8px; border-radius:999px; background: rgba(255,255,255,.12); border:1px solid rgba(255,255,255,.2); font-size:12px }
    .list{ display:grid; gap:10px }
    .list .item{ display:flex; justify-content:space-between; align-items:center; gap:10px; padding:12px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.18); border-radius:12px }
  </style>
</head>
<body>
  <header>
    <div class="container hero">
      <div class="logo" aria-hidden="true">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 11.5C3 7.36 6.36 4 10.5 4h3A6.5 6.5 0 0 1 20 10.5v0A6.5 6.5 0 0 1 13.5 17H11l-3 3v-3H6.5C4.01 17 3 14.99 3 12.5v-1z" fill="white" opacity="0.9"/></svg>
      </div>
      <div>
        <h1>Capobastone Fan Miniweb</h1>
        <div class="subtitle">Modern UI con veri tool Rok</div>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="grid">
      <section class="card" id="power-calculator">
        <h2><span class="pulse"></span> Power Calculator</h2>
        <div class="row">
          <div>
            <label for="power-base">Base</label>
            <input id="power-base" type="number" step="any" placeholder="es. 2" />
          </div>
          <div>
            <label for="power-exp">Esponente</label>
            <input id="power-exp" type="number" step="any" placeholder="es. 8" />
          </div>
        </div>
        <button class="btn" id="btn-power">Calcola potenza</button>
        <div class="result" id="power-result" aria-live="polite"></div>
      </section>

      <section class="card" id="gem-calculator">
        <h2><span class="pulse"></span> Gem Calculator</h2>
        <div class="row">
          <div>
            <label for="gem-amount">Gemme possedute</label>
            <input id="gem-amount" type="number" min="0" step="1" placeholder="0" />
          </div>
          <div>
            <label for="gem-cost">Costo per unità</label>
            <input id="gem-cost" type="number" min="0" step="0.01" placeholder="0.00" />
          </div>
        </div>
        <button class="btn" id="btn-gem">Calcola valore</button>
        <div class="result" id="gem-result" aria-live="polite"></div>
      </section>

      <section class="card" id="guida-comandanti">
        <h2><span class="pulse"></span> Guida Comandanti</h2>
        <div class="row">
          <div>
            <label for="cmd-name">Nome</label>
            <input id="cmd-name" type="text" placeholder="es. Roknar" />
          </div>
          <div>
            <label for="cmd-role">Ruolo</label>
            <input id="cmd-role" type="text" placeholder="es. Cavalleria / Rally" />
          </div>
        </div>
        <button class="btn" id="btn-add-cmd">Aggiungi comandante</button>
        <div class="muted" style="margin-top:8px">Esempi: 
          <button class="btn" style="padding:6px 10px; margin-left:8px" data-example='{"nome":"Yi-Seong-Gye","ruolo":"Arciere / Skill"}'>YSG</button>
          <button class="btn" style="padding:6px 10px" data-example='{"nome":"Guan Yu","ruolo":"Fanteria / Burst"}'>Guan</button>
        </div>
        <div class="list" id="cmd-list" style="margin-top:12px"></div>
      </section>

      <section class="card" id="event-calendar">
        <h2><span class="pulse"></span> Event Calendar</h2>
        <table>
          <thead>
            <tr><th style="width:160px">Data</th><th>Evento</th><th style="width:60px">Azioni</th></tr>
          </thead>
          <tbody id="event-tbody">
            <tr>
              <td><input type="date" value="2025-11-01"></td>
              <td><input type="text" value="Kvk Push Serale"></td>
              <td></td>
            </tr>
            <tr>
              <td><input type="date" value="2025-11-05"></td>
              <td><input type="text" value="Boss Settimana"></td>
              <td></td>
            </tr>
          </tbody>
        </table>
        <button class="btn" id="btn-add-row">Aggiungi riga</button>
        <div class="muted">Aggiorna manualmente le celle per modificare date/titoli.</div>
      </section>
    </div>

    <p class="footer">Capobastone Fan • UI vetro/gradiente • Nessun link esterno ai tool</p>
  </main>

  <script>
    const $ = (q)=>document.querySelector(q);
    const power = (b,e)=>{ if (e % 1 === 0) return Math.pow(Number(b), Number(e)); return Math.exp(Number(e) * Math.log(Number(b))); }
    document.addEventListener('click', (ev)=>{
      if(ev.target && ev.target.id==='btn-power'){
        const b = Number($('#power-base').value); const e = Number($('#power-exp').value);
        if (isNaN(b) || isNaN(e)) { $('#power-result').textContent = 'Inserisci numeri validi.'; return; }
        const r = power(b,e); $('#power-result').textContent = `Risultato: ${Number.isFinite(r)? r : 'Valore non valido'}`;
      }
      if(ev.target && ev.target.id==='btn-gem'){
        const n = Number($('#gem-amount').value); const c = Number($('#gem-cost').value);
        if (isNaN(n) || isNaN(c)) { $('#gem-result').textContent = 'Inserisci numeri validi.'; return; }
        const tot = n * c; $('#gem-result').textContent = `Valore totale: ${tot.toLocaleString('it-IT', {style:'currency', currency:'EUR'})}`;
      }
      if(ev.target && ev.target.id==='btn-add-cmd'){
        addCmd($('#cmd-name').value.trim(), $('#cmd-role').value.trim());
        $('#cmd-name').value=''; $('#cmd-role').value='';
      }
      if(ev.target && ev.target.id==='btn-add-row'){
        const tr = document.createElement('tr');
        tr.innerHTML = '<td><input type="date"></td><td><input type="text" placeholder="Nuovo evento"></td><td></td>';
        $('#event-tbody').appendChild(tr); attachRowActions(tr);
      }
    });

    const list = $('#cmd-list');
    function renderItem(nome, ruolo){
      const el = document.createElement('div'); el.className = 'item';
      const left = document.createElement('div'); left.innerHTML = `<strong>${nome}</strong><div class="muted">${ruolo}</div>`;
      const right = document.createElement('div');
      const tag = document.createElement('span'); tag.className='tag'; tag.textContent='Accordabile';
      const del = document.createElement('button'); del.className='btn'; del.style.padding='6px 10px'; del.textContent='Rimuovi';
      del.addEventListener('click', ()=> el.remove());
      right.appendChild(tag); right.appendChild(del);
      el.appendChild(left); el.appendChild(right);
      return el;
    }
    function addCmd(nome, ruolo){ if(!nome||!ruolo) return; list.appendChild(renderItem(nome,ruolo)); }
    document.querySelectorAll('#guida-comandanti [data-example]').forEach(btn=>{ btn.addEventListener('click', ()=>{ const ex = JSON.parse(btn.getAttribute('data-example')); addCmd(ex.nome, ex.ruolo); }); });

    function attachRowActions(tr){ let actions = tr.querySelector('td:last-child'); actions.innerHTML=''; const del = document.createElement('button'); del.className='btn'; del.style.padding='6px 10px'; del.textContent='Del'; del.addEventListener('click', ()=> tr.remove()); actions.appendChild(del); }
    document.querySelectorAll('#event-tbody tr').forEach(attachRowActions);
  </script>
</body>
</html>
